package com.zombielooter.security;

import cn.nukkit.event.EventHandler;
import cn.nukkit.event.Listener;
import cn.nukkit.event.player.PlayerCommandPreprocessEvent;
import cn.nukkit.event.player.PlayerQuitEvent;
import com.zombielooter.ZombieLooterX;
import com.zombielooter.zones.ZoneManager;

public class AntiExploitListener implements Listener {
    private final ZombieLooterX plugin; private final ZoneManager zones;
    public AntiExploitListener(ZombieLooterX plugin, ZoneManager zones){ this.plugin = plugin; this.zones = zones; plugin.getServer().getPluginManager().registerEvents(this, plugin); }
    @EventHandler public void onCmd(PlayerCommandPreprocessEvent e){
        String msg = e.getMessage().toLowerCase();
        if (msg.startsWith("/home") || msg.startsWith("/spawn")){
            if (zones.isPvP(e.getPlayer().getLocation())){ e.setCancelled(); e.getPlayer().sendMessage("Â§cYou cannot use that here."); }
        }
    }
    @EventHandler public void onQuit(PlayerQuitEvent e){ /* hook with combat tag if desired */ }
}
